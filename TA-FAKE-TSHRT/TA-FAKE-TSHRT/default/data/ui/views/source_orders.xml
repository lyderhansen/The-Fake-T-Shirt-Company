<dashboard version="1.1" theme="dark">
  <label>Retail Orders</label>
  <description>E-commerce order data with IT-themed products - 5 events per order lifecycle</description>

  <fieldset submitButton="false">
    <input type="time" token="time" searchWhenChanged="true">
      <label>Time Range</label>
      <default>
        <earliest>1735689600</earliest>
        <latest>1736899200</latest>
      </default>
    </input>
  </fieldset>

  <row>
    <panel>
      <html>
        <div style="padding: 20px; background: linear-gradient(135deg, #1a1a1a 0%, #1f2d1f 100%); border-radius: 8px; border-left: 4px solid #5CC05C;">
          <h2 style="color: #5CC05C; margin-top: 0;">Retail Orders</h2>
          <p style="color: #ccc; font-size: 1.1em;">E-commerce order data from The Fake T-Shrt Company. 72 IT-themed products across t-shirts, hoodies, joggers, and accessories. Each order generates 5 separate events tracking the order lifecycle.</p>
          <div style="display: flex; gap: 30px; margin-top: 15px; flex-wrap: wrap;">
            <div style="background: #333; padding: 10px 15px; border-radius: 5px;">
              <span style="color: #999;">Sourcetype:</span> <code style="color: #5CC05C;">FAKE:online:order</code>
            </div>
            <div style="background: #333; padding: 10px 15px; border-radius: 5px;">
              <span style="color: #999;">Format:</span> <strong style="color: #fff;">JSON</strong>
            </div>
            <div style="background: #333; padding: 10px 15px; border-radius: 5px;">
              <span style="color: #999;">Products:</span> <strong style="color: #fff;">72 items</strong>
            </div>
            <div style="background: #333; padding: 10px 15px; border-radius: 5px;">
              <span style="color: #999;">Events/Order:</span> <strong style="color: #fff;">5 (lifecycle)</strong>
            </div>
          </div>
        </div>
      </html>
    </panel>
  </row>

  <row>
    <panel>
      <title>Order Lifecycle</title>
      <html>
        <div style="background: #1a1a1a; padding: 15px; border-radius: 5px;">
          <h4 style="color: #5CC05C; margin-top: 0;">Each order generates 5 events:</h4>
          <table style="width: 100%; border-collapse: collapse;">
            <tr style="background: #2a2a2a;">
              <th style="padding: 8px; text-align: left; border: 1px solid #444;">Order</th>
              <th style="padding: 8px; text-align: left; border: 1px solid #444;">Status</th>
              <th style="padding: 8px; text-align: left; border: 1px solid #444;">Typical Delay</th>
              <th style="padding: 8px; text-align: left; border: 1px solid #444;">Additional Fields</th>
            </tr>
            <tr>
              <td style="padding: 8px; border: 1px solid #444; color: #5CC05C;"><strong>1</strong></td>
              <td style="padding: 8px; border: 1px solid #444;">created</td>
              <td style="padding: 8px; border: 1px solid #444;">T+0</td>
              <td style="padding: 8px; border: 1px solid #444;">items, pricing, customer, address</td>
            </tr>
            <tr>
              <td style="padding: 8px; border: 1px solid #444; color: #5CC05C;"><strong>2</strong></td>
              <td style="padding: 8px; border: 1px solid #444;">payment_confirmed</td>
              <td style="padding: 8px; border: 1px solid #444;">T+5-15 sec</td>
              <td style="padding: 8px; border: 1px solid #444;">+ payment.method, payment.transactionId</td>
            </tr>
            <tr>
              <td style="padding: 8px; border: 1px solid #444; color: #5CC05C;"><strong>3</strong></td>
              <td style="padding: 8px; border: 1px solid #444;">processing</td>
              <td style="padding: 8px; border: 1px solid #444;">T+15-60 min</td>
              <td style="padding: 8px; border: 1px solid #444;">-</td>
            </tr>
            <tr>
              <td style="padding: 8px; border: 1px solid #444; color: #5CC05C;"><strong>4</strong></td>
              <td style="padding: 8px; border: 1px solid #444;">shipped</td>
              <td style="padding: 8px; border: 1px solid #444;">T+2-8 hours</td>
              <td style="padding: 8px; border: 1px solid #444;">+ trackingNumber</td>
            </tr>
            <tr>
              <td style="padding: 8px; border: 1px solid #444; color: #5CC05C;"><strong>5</strong></td>
              <td style="padding: 8px; border: 1px solid #444;">delivered</td>
              <td style="padding: 8px; border: 1px solid #444;">T+1-3 days</td>
              <td style="padding: 8px; border: 1px solid #444;">-</td>
            </tr>
          </table>
        </div>
      </html>
    </panel>
    <panel>
      <title>Cart Size Distribution</title>
      <html>
        <div style="background: #1a1a1a; padding: 15px; border-radius: 5px;">
          <h4 style="color: #f8be34; margin-top: 0;">Items per Order:</h4>
          <table style="width: 100%; border-collapse: collapse;">
            <tr style="background: #2a2a2a;">
              <th style="padding: 8px; text-align: left; border: 1px solid #444;">Items</th>
              <th style="padding: 8px; text-align: left; border: 1px solid #444;">Probability</th>
            </tr>
            <tr>
              <td style="padding: 8px; border: 1px solid #444;">1 item</td>
              <td style="padding: 8px; border: 1px solid #444;">40%</td>
            </tr>
            <tr>
              <td style="padding: 8px; border: 1px solid #444;">2 items</td>
              <td style="padding: 8px; border: 1px solid #444;">30%</td>
            </tr>
            <tr>
              <td style="padding: 8px; border: 1px solid #444;">3 items</td>
              <td style="padding: 8px; border: 1px solid #444;">15%</td>
            </tr>
            <tr>
              <td style="padding: 8px; border: 1px solid #444;">4 items</td>
              <td style="padding: 8px; border: 1px solid #444;">10%</td>
            </tr>
            <tr>
              <td style="padding: 8px; border: 1px solid #444;">5 items</td>
              <td style="padding: 8px; border: 1px solid #444;">5%</td>
            </tr>
          </table>
          <p style="color: #999; margin-top: 10px;">~20% of items have qty=2</p>
        </div>
      </html>
    </panel>
  </row>

  <row>
    <panel>
      <title>Order Events Over Time</title>
      <chart>
        <search>
          <query>index=fake_tshrt source="/opt/splunk/etc/apps/TA-FAKE-TSHRT/bin/output/retail/orders.json"
| timechart span=1d count by status</query>
          <earliest>$time.earliest$</earliest>
          <latest>$time.latest$</latest>
        </search>
        <option name="charting.chart">column</option>
        <option name="charting.chart.stackMode">stacked</option>
        <option name="charting.drilldown">none</option>
        <option name="height">250</option>
      </chart>
    </panel>
    <panel>
      <title>Status Distribution</title>
      <chart>
        <search>
          <query>index=fake_tshrt source="/opt/splunk/etc/apps/TA-FAKE-TSHRT/bin/output/retail/orders.json"
| stats count by status
| eval order=case(
    status="created", 1,
    status="payment_confirmed", 2,
    status="processing", 3,
    status="shipped", 4,
    status="delivered", 5
)
| sort order
| fields - order</query>
          <earliest>$time.earliest$</earliest>
          <latest>$time.latest$</latest>
        </search>
        <option name="charting.chart">pie</option>
        <option name="charting.drilldown">none</option>
        <option name="height">250</option>
      </chart>
    </panel>
  </row>

  <row>
    <panel>
      <title>Unique Orders</title>
      <single>
        <search>
          <query>index=fake_tshrt source="/opt/splunk/etc/apps/TA-FAKE-TSHRT/bin/output/retail/orders.json"
| stats dc(orderId) AS orders</query>
          <earliest>$time.earliest$</earliest>
          <latest>$time.latest$</latest>
        </search>
        <option name="drilldown">none</option>
        <option name="colorMode">block</option>
        <option name="rangeColors">["0x5CC05C","0x5CC05C"]</option>
        <option name="useColors">1</option>
      </single>
    </panel>
    <panel>
      <title>Total Events</title>
      <single>
        <search>
          <query>index=fake_tshrt source="/opt/splunk/etc/apps/TA-FAKE-TSHRT/bin/output/retail/orders.json"
| stats count</query>
          <earliest>$time.earliest$</earliest>
          <latest>$time.latest$</latest>
        </search>
        <option name="drilldown">none</option>
        <option name="colorMode">block</option>
        <option name="rangeColors">["0x0877a6","0x0877a6"]</option>
        <option name="useColors">1</option>
      </single>
    </panel>
    <panel>
      <title>Events per Order</title>
      <single>
        <search>
          <query>index=fake_tshrt source="/opt/splunk/etc/apps/TA-FAKE-TSHRT/bin/output/retail/orders.json"
| stats count AS events, dc(orderId) AS orders
| eval ratio=round(events/orders, 1)
| table ratio</query>
          <earliest>$time.earliest$</earliest>
          <latest>$time.latest$</latest>
        </search>
        <option name="drilldown">none</option>
        <option name="colorMode">block</option>
        <option name="rangeColors">["0xf8be34","0xf8be34"]</option>
        <option name="useColors">1</option>
      </single>
    </panel>
    <panel>
      <title>Total Revenue</title>
      <single>
        <search>
          <query>index=fake_tshrt source="/opt/splunk/etc/apps/TA-FAKE-TSHRT/bin/output/retail/orders.json" status="created"
| stats sum(pricing.total) AS revenue
| eval revenue="$".tostring(round(revenue,2),"commas")</query>
          <earliest>$time.earliest$</earliest>
          <latest>$time.latest$</latest>
        </search>
        <option name="drilldown">none</option>
        <option name="colorMode">block</option>
        <option name="rangeColors">["0x5CC05C","0x5CC05C"]</option>
        <option name="useColors">1</option>
      </single>
    </panel>
  </row>

  <row>
    <panel>
      <title>Average Items per Order</title>
      <single>
        <search>
          <query>index=fake_tshrt source="/opt/splunk/etc/apps/TA-FAKE-TSHRT/bin/output/retail/orders.json" status="created"
| eval item_count=mvcount(items{}.sku)
| stats avg(item_count) AS avg_items
| eval avg_items=round(avg_items, 2)</query>
          <earliest>$time.earliest$</earliest>
          <latest>$time.latest$</latest>
        </search>
        <option name="drilldown">none</option>
        <option name="colorMode">block</option>
        <option name="rangeColors">["0xf8be34","0xf8be34"]</option>
        <option name="useColors">1</option>
      </single>
    </panel>
    <panel>
      <title>Average Order Value</title>
      <single>
        <search>
          <query>index=fake_tshrt source="/opt/splunk/etc/apps/TA-FAKE-TSHRT/bin/output/retail/orders.json" status="created"
| stats avg(pricing.total) AS aov
| eval aov="$".tostring(round(aov,2),"commas")</query>
          <earliest>$time.earliest$</earliest>
          <latest>$time.latest$</latest>
        </search>
        <option name="drilldown">none</option>
        <option name="colorMode">block</option>
        <option name="rangeColors">["0xf8be34","0xf8be34"]</option>
        <option name="useColors">1</option>
      </single>
    </panel>
    <panel>
      <title>Unique Customers</title>
      <single>
        <search>
          <query>index=fake_tshrt source="/opt/splunk/etc/apps/TA-FAKE-TSHRT/bin/output/retail/orders.json"
| stats dc(customerId)</query>
          <earliest>$time.earliest$</earliest>
          <latest>$time.latest$</latest>
        </search>
        <option name="drilldown">none</option>
        <option name="colorMode">block</option>
        <option name="rangeColors">["0x0877a6","0x0877a6"]</option>
        <option name="useColors">1</option>
      </single>
    </panel>
  </row>

  <row>
    <panel>
      <title>Sample Order Lifecycle</title>
      <table>
        <search>
          <query>index=fake_tshrt source="/opt/splunk/etc/apps/TA-FAKE-TSHRT/bin/output/retail/orders.json"
| head 100
| dedup orderId
| head 1
| map search="index=fake_tshrt source=\"/opt/splunk/etc/apps/TA-FAKE-TSHRT/bin/output/retail/orders.json\" orderId=\"$orderId$\""
| sort _time
| table _time, orderId, status, pricing.total, payment.method, trackingNumber
| rename pricing.total AS total, payment.method AS payment</query>
          <earliest>$time.earliest$</earliest>
          <latest>$time.latest$</latest>
        </search>
        <option name="drilldown">none</option>
        <option name="count">10</option>
      </table>
    </panel>
  </row>

  <row>
    <panel>
      <title>Product Categories</title>
      <html>
        <div style="background: #1a1a1a; padding: 15px; border-radius: 5px;">
          <table style="width: 100%; border-collapse: collapse;">
            <tr style="background: #2a2a2a;">
              <th style="padding: 8px; text-align: left; border: 1px solid #444;">Type</th>
              <th style="padding: 8px; text-align: left; border: 1px solid #444;">Count</th>
              <th style="padding: 8px; text-align: left; border: 1px solid #444;">Price Range</th>
            </tr>
            <tr>
              <td style="padding: 8px; border: 1px solid #444; color: #5CC05C;">T-shirts</td>
              <td style="padding: 8px; border: 1px solid #444;">35</td>
              <td style="padding: 8px; border: 1px solid #444;">$34-45</td>
            </tr>
            <tr>
              <td style="padding: 8px; border: 1px solid #444; color: #f8be34;">Hoodies</td>
              <td style="padding: 8px; border: 1px solid #444;">17</td>
              <td style="padding: 8px; border: 1px solid #444;">$72-85</td>
            </tr>
            <tr>
              <td style="padding: 8px; border: 1px solid #444; color: #0877a6;">Joggers</td>
              <td style="padding: 8px; border: 1px solid #444;">10</td>
              <td style="padding: 8px; border: 1px solid #444;">$65-72</td>
            </tr>
            <tr>
              <td style="padding: 8px; border: 1px solid #444; color: #dc4e41;">Accessories</td>
              <td style="padding: 8px; border: 1px solid #444;">10</td>
              <td style="padding: 8px; border: 1px solid #444;">$28-85</td>
            </tr>
          </table>
        </div>
      </html>
    </panel>
    <panel>
      <title>Popular Designs</title>
      <html>
        <div style="background: #1a1a1a; padding: 15px; border-radius: 5px;">
          <h4 style="color: #5CC05C; margin-top: 0;">IT-Themed Products</h4>
          <ul style="color: #ccc; line-height: 1.8;">
            <li>"It Works On My Machine"</li>
            <li>"It's Always DNS"</li>
            <li>"Hack the Planet"</li>
            <li>"sudo make me a sandwich"</li>
            <li>"There's No Place Like 127.0.0.1"</li>
          </ul>

          <h4 style="color: #999; margin-top: 15px;">Categories</h4>
          <p style="color: #ccc;">developer, sysadmin, security, nerd, modern</p>
        </div>
      </html>
    </panel>
  </row>

  <row>
    <panel>
      <title>Use Cases</title>
      <html>
        <div style="background: #1a1a1a; padding: 20px; border-radius: 5px;">
          <h3 style="color: #5CC05C; margin-top: 0;">Common SPL Queries</h3>

          <h4 style="color: #ccc; margin-top: 20px;">Count Unique Orders</h4>
          <pre style="background: #0d0d0d; padding: 10px; border-radius: 3px; overflow-x: auto; color: #5CC05C;">index=fake_tshrt source="/opt/splunk/etc/apps/TA-FAKE-TSHRT/bin/output/retail/orders.json"
| stats dc(orderId) AS orders, count AS events
| eval events_per_order=round(events/orders, 1)</pre>

          <h4 style="color: #ccc; margin-top: 20px;">Order Lifecycle Timeline</h4>
          <pre style="background: #0d0d0d; padding: 10px; border-radius: 3px; overflow-x: auto; color: #5CC05C;">index=fake_tshrt source="/opt/splunk/etc/apps/TA-FAKE-TSHRT/bin/output/retail/orders.json" orderId="ORD-2026-00001"
| sort _time
| table _time, status, pricing.total, payment.method, trackingNumber</pre>

          <h4 style="color: #ccc; margin-top: 20px;">Status Distribution</h4>
          <pre style="background: #0d0d0d; padding: 10px; border-radius: 3px; overflow-x: auto; color: #5CC05C;">index=fake_tshrt source="/opt/splunk/etc/apps/TA-FAKE-TSHRT/bin/output/retail/orders.json"
| stats count by status
| eval order=case(status="created",1, status="payment_confirmed",2, status="processing",3, status="shipped",4, status="delivered",5)
| sort order</pre>

          <h4 style="color: #ccc; margin-top: 20px;">Revenue by Day (use created events only)</h4>
          <pre style="background: #0d0d0d; padding: 10px; border-radius: 3px; overflow-x: auto; color: #5CC05C;">index=fake_tshrt source="/opt/splunk/etc/apps/TA-FAKE-TSHRT/bin/output/retail/orders.json" status="created"
| timechart span=1d sum(pricing.total) AS revenue, dc(orderId) AS orders</pre>

          <h4 style="color: #ccc; margin-top: 20px;">Items per Order Distribution</h4>
          <pre style="background: #0d0d0d; padding: 10px; border-radius: 3px; overflow-x: auto; color: #5CC05C;">index=fake_tshrt source="/opt/splunk/etc/apps/TA-FAKE-TSHRT/bin/output/retail/orders.json" status="created"
| eval item_count=mvcount(items{}.sku)
| stats count by item_count
| sort item_count</pre>

          <h4 style="color: #ccc; margin-top: 20px;">Average Time Between Statuses</h4>
          <pre style="background: #0d0d0d; padding: 10px; border-radius: 3px; overflow-x: auto; color: #5CC05C;">index=fake_tshrt source="/opt/splunk/etc/apps/TA-FAKE-TSHRT/bin/output/retail/orders.json"
| sort orderId, _time
| streamstats current=f last(_time) AS prev_time by orderId
| eval duration=_time-prev_time
| where duration>0
| stats avg(duration) AS avg_seconds by status
| eval avg_time=tostring(avg_seconds, "duration")</pre>
        </div>
      </html>
    </panel>
  </row>

  <row>
    <panel>
      <title>Sample Events (All Statuses)</title>
      <table>
        <search>
          <query>index=fake_tshrt source="/opt/splunk/etc/apps/TA-FAKE-TSHRT/bin/output/retail/orders.json"
| sort - _time
| table _time, orderId, status, customerId, pricing.total, payment.method, trackingNumber
| rename pricing.total AS total, payment.method AS payment
| head 30</query>
          <earliest>$time.earliest$</earliest>
          <latest>$time.latest$</latest>
        </search>
        <option name="drilldown">none</option>
        <option name="count">15</option>
      </table>
    </panel>
  </row>
</dashboard>
